<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Synthesis 8.2.1 Released | Kam&#39;s Idea Log</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="I am happy to announce that Synthesis 8.2.1 is available on NuGet. This release primarily adds additional features.  What’s New?Improved Multiple Configuration SupportPreviously registering multiple c">
<meta property="og:type" content="article">
<meta property="og:title" content="Synthesis 8.2.1 Released">
<meta property="og:url" content="https://kamsar.net/index.php/2016/06/Synthesis-8-2-1-Released/index.html">
<meta property="og:site_name" content="Kam&#39;s Idea Log">
<meta property="og:description" content="I am happy to announce that Synthesis 8.2.1 is available on NuGet. This release primarily adds additional features.  What’s New?Improved Multiple Configuration SupportPreviously registering multiple c">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://kamsar.net/index.php/2016/06/Synthesis-8-2-1-Released/bemyfriend.jpg">
<meta property="article:published_time" content="2016-06-07T02:18:07.000Z">
<meta property="article:modified_time" content="2021-07-26T23:19:02.479Z">
<meta property="article:author" content="Kam Figy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kamsar.net/index.php/2016/06/Synthesis-8-2-1-Released/bemyfriend.jpg">
<meta name="twitter:creator" content="@kamsar">
  
    <link rel="alternative" href="/index.php/feed" title="Kam&#39;s Idea Log" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-62284328-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 5.4.0"></head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo">
        <span class="site-title">Kam&#39;s Idea Log</span>
        <span class="subtitle">C#, Jamstack, and Shenanigans</span>
      </a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        <div class="profile" id="profile-nav">
          <a id="profile-anchor" href="javascript:;"><img class="avatar" src="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=40" srcset="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=80 2x" alt="omg the beard"><i class="fa fa-caret-down"></i></a>
        </div>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="https://kamsar.net"></form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
      
        <td><a class="main-nav-link" href="/">Home</a></td>
      
        <td><a class="main-nav-link" href="/blog/archives">Archives</a></td>
      
      <td>
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="https://kamsar.net"></form>
      </td>
      </tr>
    </table>
  </div>
  
</header>
    <div class="outer">
      <aside id="profile">
  <div class="inner profile-inner">
  	<div class="base-info profile-block">
		  <img id="avatar" src="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=128" srcset="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=256 2x" alt="#sitecorebeard">
      <h2 id="name">Kam Figy</h2>
      <h3 id="title">Principal Platform Architect at</h3>
      <a class="corp-logo" href="https://uniform.dev" target="_blank"><img src="/css/images/uniform-logo.svg" alt="Uniform" width="180"></a>
      <span id="location"><i class="fa fa-map-marker"></i>Vancouver, WA USA</span>
      <a id="follow" target="_blank" rel="noopener" href="https://twitter.com/kamsar">FOLLOW</a>
  	</div>
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
        
          <td><a target="_blank" rel="noopener" href="https://github.com/kamsar" title="github"><i class="fa fa-github"></i></a></td>
        
          <td><a target="_blank" rel="noopener" href="https://twitter.com/kamsar" title="twitter"><i class="fa fa-twitter"></i></a></td>
        
          <td><a href="/index.php/feed" title="rss"><i class="fa fa-rss"></i></a></td>
        
        </tr>
      </table>
    </div>
    <div class="article-info profile-block bio">
      <h2>About</h2>
      <p>Kam has been making websites since 1996, starting out with a 14.4k modem on a <a href="https://en.wikipedia.org/wiki/Party_line_(telephony)" target="_blank">party line</a> in the Hawaiian rainforest. A veteran developer, architect, and speaker, he's been working in the content management space for well over a decade. Kam is the author of <a href="https://github.com/kamsar/Unicorn" target="_blank">Unicorn</a>, <a href="https://github.com/kamsar/Synthesis" target="_blank">Synthesis</a>, <a href="https://github.com/kamsar/Dianoga" target="_blank">Dianoga</a>, and several other open-source libraries.</p>
    </div>
  </div>
</aside>
      <section id="main"><article id="post-Synthesis-8-2-1-Released" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Synthesis 8.2.1 Released
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/index.php/2016/06/Synthesis-8-2-1-Released/">
    <time datetime="2016-06-07T02:18:07.000Z" itemprop="datePublished">June 6, 2016</time>
  </a>
</div>
          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/index.php/category/Synthesis/">Synthesis</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I am happy to announce that Synthesis 8.2.1 is available on NuGet. This release primarily adds additional features. </p>
<h2 id="What’s-New"><a href="#What’s-New" class="headerlink" title="What’s New?"></a>What’s New?</h2><h3 id="Improved-Multiple-Configuration-Support"><a href="#Improved-Multiple-Configuration-Support" class="headerlink" title="Improved Multiple Configuration Support"></a>Improved Multiple Configuration Support</h3><p>Previously registering multiple configurations in Synthesis was possible but way too hard. Configurations may now register themselves using code, similar to MVC area registrations.</p>
<p>To register a new configuration with Synthesis 8.2.1:</p>
<ul>
<li>Add a class to the assembly you want the configuration’s model to live in that derives from <code>SynthesisConfigurationRegistration</code></li>
<li>Implement the abstract members of <code>SynthesisConfigurationRegistration</code>. Much deeper customization is also available by overriding other optional members.</li>
<li>Add a <code>SynthesisConfigRegistrar</code> processor to the <code>initialize</code> pipeline that is set to scan your assembly, e.g.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;pipelines&gt;</span><br><span class="line">	&lt;initialize&gt;</span><br><span class="line">		&lt;!-- IMPORTANT: Each registrar instance must have a unique hint value for the patch to work correctly. --&gt;</span><br><span class="line">		&lt;processor type=&quot;Synthesis.Pipelines.Initialize.SynthesisConfigRegistrar, Synthesis&quot; hint=&quot;Hinty McHintface&quot;&gt;</span><br><span class="line">			&lt;assemblies hint=&quot;list:AddAssembly&quot;&gt;</span><br><span class="line">				&lt;meAssembly&gt;My.Assembly.WithModel&lt;/meAssembly&gt;</span><br><span class="line">			&lt;/assemblies&gt;</span><br><span class="line">		&lt;/processor&gt;</span><br><span class="line">	&lt;/initialize&gt;</span><br><span class="line">&lt;/pipelines&gt;</span><br></pre></td></tr></table></figure></li>
<li>That’s it! Your configuration will now be activated.</li>
</ul>
<h3 id="Auto-Friending"><a href="#Auto-Friending" class="headerlink" title="Auto Friending"></a>Auto Friending</h3><img src="/index.php/2016/06/Synthesis-8-2-1-Released/bemyfriend.jpg" class="" title="WHAT DID I EVER DO TO YOU?">

<p>Along with simpler configuration registration, allowing your configurations to reference each other’s generated classes is also far easier with “Auto-Friending.”</p>
<p>To illustrate this, suppose you were using Habitat and in your Project layer you had templates that inherited Feature templates. Without auto-friending (or previously manual friending), the Project would generate duplicate interfaces for the Feature templates. This is a bad thing. But with friending, the Project generated template will simply inherit from the already existing Feature model, extending implicit dependency in the database into explicit dependency at a code level (also a good thing!).</p>
<p>With auto-friending, configurations automatically friend each other in the order they are registered. So for the example above, as long as the Feature’s model configuration was registered before the Project’s model, everything would Just Work. You can control the order of registration by the order in the <code>SynthesisConfigRegistrar</code> assemblies.</p>
<h3 id="IRenderingContext-and-improved-IoC-support-Synthesis-Mvc"><a href="#IRenderingContext-and-improved-IoC-support-Synthesis-Mvc" class="headerlink" title="IRenderingContext and improved IoC support (Synthesis.Mvc)"></a>IRenderingContext and improved IoC support (Synthesis.Mvc)</h3><p>A pattern that I’ve been using for a while (<a target="_blank" rel="noopener" href="http://www.martywoods.nl/unit-testing-sitecore-mvc-its-easy-when-using-synthesis/">as have others</a>) to improve testability is to make a facade over the <code>RenderingContext</code> that turns it into a Synthesis API and removes all <code>Item</code> dependencies. This <code>IRenderingContext</code> can be registered with your IoC container (to <code>SitecoreRenderingContext</code>) and constructor-injected into controller renderings to make <code>Item</code>-free controllers that are easy to test without any hacks. Even awesome hacks like FakeDb.</p>
<p>For example:</p>
<p>```<br>public class FooController : Controller<br>{<br>    private readonly IRenderingContext _renderingContext;</p>
<pre><code>public FooController(IRenderingContext renderingContext) 
&#123;
    _renderingContext = renderingContext;
&#125;

public ActionResult Foo() 
&#123;
    var dataSource = _renderingContext.GetRenderingDatasource&lt;IExpectedTypeItem&gt;();

    if(dataSource == null) 
    &#123;
        // no datasource set, or datasource is wrong template type (or context item, if no datasource set)
        return Content(&quot;Derp.&quot;);
    &#125;

    var model = new FooViewModel(dataSource);

    // set other model props here

    // Note that none of this controller directly used Sitecore APIs and thus does not require FakeDb nor HTTP context
    // to have unit tests written against it.

    return View(model);
&#125;
</code></pre>
<p>}```</p>
<p>Additional, more specific interfaces are also available for more specific use cases: <code>IContextItem</code>, <code>IContextDatabase</code>, and <code>IContextSite</code>. These can all be bound to <code>SitecoreRenderingContext</code> and provide smaller interfaces for more specific tasks.</p>
<h3 id="Config-Patching-by-Default"><a href="#Config-Patching-by-Default" class="headerlink" title="Config Patching by Default"></a>Config Patching by Default</h3><p>Synthesis now ships with <code>Synthesis.LocalConfig.config.example</code>, which is designed to be duplicated to form your own configuration patch. This encourages leaving the default configurations alone, which in turn greatly simplifies upgrading. The documentation and README has also been updated to reflect this.</p>
<h2 id="Improvements"><a href="#Improvements" class="headerlink" title="Improvements"></a>Improvements</h2><ul>
<li>The default settings have been improved:<ul>
<li>Creating model backup files is now disabled by default because it is of questionable utility when using source control</li>
<li>The <code>InterfaceOutputPath</code> and <code>ItemOutputPath</code> settings have been deprecated and merged into a single <code>ModelOutputPath</code> because it’s silly to emit more than one model file. The separate settings will still operate if you wish to use them.</li>
<li>Uncommonly used settings have been removed from Synthesis.config (<code>SitecoreKernelAssemblyPath</code>, <code>SynthesisAssemblyPath</code>, and <code>InterfaceSuffix</code>). They continue to work if set, but are removed for brevity as they are generally not used other than at default values.</li>
</ul>
</li>
<li>The <code>SynthesisEditContext</code> class has been marked obsolete because <a target="_blank" rel="noopener" href="http://sitecore.alexiasoft.nl/2006/04/03/new-way-of-editing-items/#comment-16">the pattern is a bad idea</a></li>
<li>WebForms related classes have been marked obsolete because don’t use WebForms</li>
<li>The ability to attempt to automatically rebuild the project containing the model on startup has been removed due to being a generally bad idea</li>
<li>The <code>ModelOutputBasePath</code> setting has been added. This path is prepended to the <code>ModelOutputPath</code> for all configurations. The advantage of using this is that for people who work out of webroot, they can use <code>&lt;sc.variable&gt;</code> values in a setting (e.g. the out of webroot project location) whereas Sitecore does not expand variables in the <code>ModelOutputPath</code>. <a target="_blank" rel="noopener" href="https://github.com/kamsar/Synthesis/issues/27">#27</a></li>
</ul>
<h2 id="Bug-Fixes"><a href="#Bug-Fixes" class="headerlink" title="Bug Fixes"></a>Bug Fixes</h2><ul>
<li>Setting max backups to 0 no longer results in an infinite loop and now does not make backup files <a target="_blank" rel="noopener" href="https://github.com/kamsar/Synthesis/issues/28">#28</a></li>
<li>Registering the same assembly twice in the type list provider will no longer scan the assembly twice</li>
<li>Wildcards that do not end in * (e.g. Foo.*.Web) will not operate correctly when adding assemblies to the type list provider</li>
</ul>
<h2 id="Upgrading"><a href="#Upgrading" class="headerlink" title="Upgrading"></a>Upgrading</h2><p>Upgrading should be as simple as a NuGet upgrade*. If you have customized your Synthesis.config you may need to merge it with the default (or even better make it a patch file).</p>
<p>* as long as you are using Sitecore 8.1. As with the 8.2.0 release, it is designed only for Sitecore 8.1 due to breaking Sitecore API changes in 8.1. Sorry about that :(</p>
<h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks!"></a>Thanks!</h2><p>Thank you to the community members who contributed to this release:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/AlexKasaku">Alex Washtell</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/thesoftwarejedi">Dana Hanna</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/patocl">patocl</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/andyshokry">Andy Shokry</a></li>
<li><a target="_blank" rel="noopener" href="https://twitter.com/martijn_b0s">Martijn Bos</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/mulate">Mauricio Ulate</a></li>
</ul>
<p>As always, happy coding!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kamsar.net/index.php/2016/06/Synthesis-8-2-1-Released/" data-id="ckrl9emyc004198q73srxfvqv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/index.php/2016/08/Configuring-domains-from-patch-files/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Configuring domains from patch files
        
      </div>
    </a>
  
  
    <a href="/index.php/2016/03/Unicorn-3-1-5-Released/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Unicorn 3.1.5 Released</div>
    </a>
  
</nav>

  
</article>

</section>
      
        <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul id="recent-post" class="no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/JavaScript/">JavaScript</a></p>
              <p class="item-title"><a href="/index.php/2021/07/Fun-with-async-generators-and-for-await/" class="title">Fun with async generators and for await</a></p>
              <p class="item-date"><time datetime="2021-07-26T23:30:51.000Z" itemprop="datePublished">July 26, 2021</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/Jamstack/">Jamstack</a></p>
              <p class="item-title"><a href="/index.php/2020/08/Deploying-multiple-Netlify-sites-from-one-Git-repository/" class="title">Deploying multiple Netlify sites from one monorepo</a></p>
              <p class="item-date"><time datetime="2020-08-21T03:30:32.000Z" itemprop="datePublished">August 20, 2020</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/JSS/">JSS</a></p>
              <p class="item-title"><a href="/index.php/2019/09/Running-JSS-headless-mode-in-containers-part-2-Build-containers/" class="title">Running JSS headless mode in containers part 2: Build containers</a></p>
              <p class="item-date"><time datetime="2019-09-16T02:14:04.000Z" itemprop="datePublished">September 15, 2019</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/JSS/">JSS</a></p>
              <p class="item-title"><a href="/index.php/2019/09/Running-JSS-headless-mode-in-containers-part-1/" class="title">Running JSS headless mode in containers, part 1</a></p>
              <p class="item-date"><time datetime="2019-09-08T19:00:36.000Z" itemprop="datePublished">September 8, 2019</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/C/">C#</a></p>
              <p class="item-title"><a href="/index.php/2019/05/Build-2019-All-the-things/" class="title">Build 2019: All the things</a></p>
              <p class="item-date"><time datetime="2019-05-10T23:01:11.000Z" itemprop="datePublished">May 10, 2019</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/index.php/category/April-1/">April 1</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Blade/">Blade</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Build-Scripts/">Build Scripts</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/C/">C#</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Dianoga/">Dianoga</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/JSS/">JSS</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Jamstack/">Jamstack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/JavaScript/">JavaScript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Node-js/">Node.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/">Sitecore</a><span class="category-list-count">39</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/Crypto/">Crypto</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/Lucene/">Lucene</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/MVC/">MVC</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/Search/">Search</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/xDB/">xDB</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Synthesis/">Synthesis</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Unicorn/">Unicorn</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/WebConsole/">WebConsole</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  
  <div id="toTop" class="fa fa-chevron-up"></div>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>&copy; 2021 Kam Figy</p>
      <p><small>Opinions expressed on this blog are my own, and not necessarily those of my employer.</small></p>
     <p><small>This work is licensed under a <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</small></p>
    </div>
  </div>
</footer>
    


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>




<script src="/js/script.js"></script>


  </div>
</body>
</html>