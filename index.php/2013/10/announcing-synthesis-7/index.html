<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Announcing Synthesis 7 | Kam&#39;s Idea Log</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Synthesis 7 is now available on NuGet. This version brings a number of new features and bug fixes largely aimed at supporting unit testing of sites that are built with Synthesis. Version 7 is compatib">
<meta property="og:type" content="article">
<meta property="og:title" content="Announcing Synthesis 7">
<meta property="og:url" content="https://kamsar.net/index.php/2013/10/announcing-synthesis-7/index.html">
<meta property="og:site_name" content="Kam&#39;s Idea Log">
<meta property="og:description" content="Synthesis 7 is now available on NuGet. This version brings a number of new features and bug fixes largely aimed at supporting unit testing of sites that are built with Synthesis. Version 7 is compatib">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2013-10-03T06:37:07.000Z">
<meta property="article:modified_time" content="2021-07-26T23:19:02.432Z">
<meta property="article:author" content="Kam Figy">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@kamsar">
  
    <link rel="alternative" href="/index.php/feed" title="Kam&#39;s Idea Log" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-62284328-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 5.4.0"></head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo">
        <span class="site-title">Kam&#39;s Idea Log</span>
        <span class="subtitle">C#, Jamstack, and Shenanigans</span>
      </a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        <div class="profile" id="profile-nav">
          <a id="profile-anchor" href="javascript:;"><img class="avatar" src="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=40" srcset="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=80 2x" alt="omg the beard"><i class="fa fa-caret-down"></i></a>
        </div>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="https://kamsar.net"></form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
      
        <td><a class="main-nav-link" href="/">Home</a></td>
      
        <td><a class="main-nav-link" href="/blog/archives">Archives</a></td>
      
      <td>
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="https://kamsar.net"></form>
      </td>
      </tr>
    </table>
  </div>
  
</header>
    <div class="outer">
      <aside id="profile">
  <div class="inner profile-inner">
  	<div class="base-info profile-block">
		  <img id="avatar" src="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=128" srcset="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=256 2x" alt="#sitecorebeard">
      <h2 id="name">Kam Figy</h2>
      <h3 id="title">Principal Platform Architect at</h3>
      <a class="corp-logo" href="https://uniform.dev" target="_blank"><img src="/css/images/uniform-logo.svg" alt="Uniform" width="180"></a>
      <span id="location"><i class="fa fa-map-marker"></i>Vancouver, WA USA</span>
      <a id="follow" target="_blank" rel="noopener" href="https://twitter.com/kamsar">FOLLOW</a>
  	</div>
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
        
          <td><a target="_blank" rel="noopener" href="https://github.com/kamsar" title="github"><i class="fa fa-github"></i></a></td>
        
          <td><a target="_blank" rel="noopener" href="https://twitter.com/kamsar" title="twitter"><i class="fa fa-twitter"></i></a></td>
        
          <td><a href="/index.php/feed" title="rss"><i class="fa fa-rss"></i></a></td>
        
        </tr>
      </table>
    </div>
    <div class="article-info profile-block bio">
      <h2>About</h2>
      <p>Kam has been making websites since 1996, starting out with a 14.4k modem on a <a href="https://en.wikipedia.org/wiki/Party_line_(telephony)" target="_blank">party line</a> in the Hawaiian rainforest. A veteran developer, architect, and speaker, he's been working in the content management space for well over a decade. Kam is the author of <a href="https://github.com/kamsar/Unicorn" target="_blank">Unicorn</a>, <a href="https://github.com/kamsar/Synthesis" target="_blank">Synthesis</a>, <a href="https://github.com/kamsar/Dianoga" target="_blank">Dianoga</a>, and several other open-source libraries.</p>
    </div>
  </div>
</aside>
      <section id="main"><article id="post-announcing-synthesis-7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Announcing Synthesis 7
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/index.php/2013/10/announcing-synthesis-7/">
    <time datetime="2013-10-03T06:37:07.000Z" itemprop="datePublished">October 2, 2013</time>
  </a>
</div>
          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/index.php/category/Synthesis/">Synthesis</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Synthesis 7 is now <a target="_blank" rel="noopener" href="https://www.nuget.org/packages/Synthesis">available on NuGet</a>. This version brings a number of new features and bug fixes largely aimed at supporting unit testing of sites that are built with Synthesis. Version 7 is compatible with Sitecore 7 Update-1 and Update-2.</p>
<h2 id="Fully-mockable-generated-item-classes"><a href="#Fully-mockable-generated-item-classes" class="headerlink" title="Fully mockable generated item classes"></a>Fully mockable generated item classes</h2><p>Previous versions of Synthesis would generate classes that had concrete field types, such as <code>RichTextField</code>, that were strongly tied to the Sitecore item APIs or search APIs. This prevented easily creating mock versions of the class for testing purposes. Synthesis 7 changes that by allowing you to define both a private concrete field type mapping <em>and</em> and public interface mapping, such as this:</p>
<pre><code>[IndexField(&quot;title&quot;)]
public ITextField Title &#123;
    get &#123; return new TextField(/* ... */);
&#125;
</code></pre>
<p>Now each field can be easily mocked with a mocking framework of your choice, enabling you to create totally Sitecore API free instances of Synthesis items. For example, using <a target="_blank" rel="noopener" href="https://github.com/Moq">Moq</a>:</p>
<pre><code>var item = new Mock&lt;IFooItem&gt;();
item.SetupGet(x =&gt; x.Title).Returns(new TestTextField(&quot;isn&#39;t this nice?&quot;));

string result = item.Object.Title.RawValue; // &quot;isn&#39;t this nice?&quot;
</code></pre>
<p>But wait! What about those pesky metadata properties like statistics, database, and editing? Those are annoying, huh. Well Synthesis 7 uses adapter classes to make those mockable too.</p>
<pre><code>public IDatabaseAdapter Database &#123; get; &#125;
</code></pre>
<p>It’s very easy to add a public interface to a field type mapping; you simply add an interface attribute to the mapping:</p>
<pre><code>&lt;map field=&quot;Single-Line Text&quot; type=&quot;Synthesis.FieldTypes.TextField, Synthesis&quot; interface=&quot;Synthesis.FieldTypes.Interfaces.ITextField, Synthesis&quot; /&gt;
</code></pre>
<h2 id="New-testing-package"><a href="#New-testing-package" class="headerlink" title="New testing package"></a>New testing package</h2><p>There is now a Synthesis.Testing package on NuGet that contains some dummy field type implementations to help you write cleaner mocks of Synthesis item types. The <code>TestTestField</code> class referred to in the Moq example above is part of the testing package.</p>
<h2 id="Injecting-custom-field-implementations-on-a-per-template-field-basis"><a href="#Injecting-custom-field-implementations-on-a-per-template-field-basis" class="headerlink" title="Injecting custom field implementations on a per-template-field basis"></a>Injecting custom field implementations on a per-template-field basis</h2><p>Previously you were able to map a Synthesis field class to a Sitecore field type. Synthesis 7 enables you to get more specific and map a field class to a specific field on a template. This enables you to provide custom behavior for specific fields.</p>
<pre><code>&lt;templateFieldMappings hint=&quot;raw:AddTemplateMapping&quot;&gt;
    &lt;map template=&quot;Content Section&quot; field=&quot;Content&quot; type=&quot;Synthesis.FieldTypes.TextField, Synthesis&quot; interface=&quot;Synthesis.FieldTypes.Interfaces.ITextField, Synthesis&quot; /&gt;
&lt;/templateFieldMappings&gt;
</code></pre>
<p>The template specification can be the template name, full path, or ID interchangeably. The field can be either the field name or field ID.</p>
<h2 id="Better-missing-field-messages"><a href="#Better-missing-field-messages" class="headerlink" title="Better missing field messages"></a>Better missing field messages</h2><p>If you’ve used Synthesis long, you’ve probably seen this one. You add a template field, generate your model, and forget to publish the field. Suddenly you get a really helpful “Parameter cannot be null” error that doesn’t tell you anything about the field name that actually caused it. Synthesis 7 fixes that problem, and reports the field name that was missing instead of a generic error message.</p>
<h2 id="Bug-fixes"><a href="#Bug-fixes" class="headerlink" title="Bug fixes"></a>Bug fixes</h2><ul>
<li>Modified default behavior of synthesis.axd. In Synthesis 5-6, if the model was detected as synchronized, no option to force a rebuild would be available. Problem is, configuration changes (e.g. changing the root namespace) do not invalidate the template signatures - so there were times when a ‘synchronized’ model would need to be force rebuilt. In Synthesis 7, the handler always rebuilds the model even if synchronization is detected.</li>
<li>Synthesis will no longer generate invalid C# code when faced with a template or field name that starts with a number. Leading numbers are automatically prefixed with _ so as to retain valid C#.</li>
<li>Fix media item URL generation error when <code>LinkProvider</code> has <code>AlwaysIncludeServerUrl</code> enabled. Previously, links like <code>/http://foo/~/media/bar</code> would be generated. Fix contributed by <a target="_blank" rel="noopener" href="https://github.com/PetersonDave">Dave Peterson</a></li>
<li>Removed a hack that allowed the LINQ extension <code>GetSynthesisQueryable()</code> to work, because it was fixed in Sitecore 7 Update-1.</li>
</ul>
<h2 id="Breaking-changes"><a href="#Breaking-changes" class="headerlink" title="Breaking changes"></a>Breaking changes</h2><ul>
<li>Due to the new adapter classes, code that uses the Database property may break. The adapter class returns Synthesis types, whereas the Synthesis 6 version returned Sitecore <code>Item</code> instances. This enables decoupling the <code>IDatabaseAdapter</code> from the Sitecore API.</li>
<li>If using interfaces for your object properties (which you will need to manually enable if upgrading), the type of those properties will change. This may break code such as view models that contains fields as properties.</li>
<li>Support for implicit field conversions (e.g. to treat a TextField as a string) have been removed. These do not work when using interfaces, and generally are a bad idea because they can allow unexpected behavior (is an implicit conversion to use a raw value? field renderer?).</li>
<li>Support for the <code>FileListField</code> (File Drop Area) field type has been removed</li>
<li>Support for the <code>WordDocumentField</code> field type has been removed</li>
<li>The <code>IFieldMappingProvider</code> interface signature has changed to enable injecting custom field types on a field level. Custom providers may need minor refactoring.</li>
<li><em>Synthesis.Blade:</em> the signature of the <code>SynthesisPresenter.GetItem()</code> method has changed from protected to public (a breaking change for all presenters based on this). Unfortunately, this was by far the simplest and cleanest avenue to allow for injecting arbitrary Synthesis item data sources for testing purposes.</li>
</ul>
<h2 id="Upgrading"><a href="#Upgrading" class="headerlink" title="Upgrading"></a>Upgrading</h2><p>Upgrading to Synthesis 7 is a process that takes a bit of work. </p>
<ul>
<li><p>First, upgrade the NuGet package to Synthesis 7</p>
</li>
<li><p>After upgrading the NuGet package, you should remove the field mappings in Synthesis.config to the removed Word Document field and File Drop Area field types. The Word field mapping may not exist depending on what version you’re coming from.</p>
<pre><code>  &lt;map field=&quot;File Drop Area&quot; type=&quot;Synthesis.FieldTypes.FileListField, Synthesis&quot; /&gt; &lt;!-- remove this from Synthesis.config --&gt;
</code></pre>
</li>
<li><p>Next, you will need to regenerate the Synthesis model. Do not build the project at this point, because the model format has changed in Synthesis 7 and the existing model will be full of build errors. Hit /synthesis.axd and force a regeneration, which will remove any build errors not caused by a breaking change as outlined above.</p>
<ul>
<li>If some sort of global handler (such as a <code>httpRequestBegin</code> pipeline handler) is causing an error before you even get to synthesis.axd temporarily disable it for the purposes of regenerating the model.</li>
</ul>
</li>
<li><p>By default, a Synthesis 7 upgrade will not enable using interfaces for field types (unless you overwrite Synthesis.config during the install, which is not recommended). Should you wish to enable interfaces, simply look at the <a target="_blank" rel="noopener" href="https://github.com/kamsar/Synthesis/blob/master/Source/Synthesis/Synthesis.config">default config file</a> and merge the interface attributes in under <code>&lt;fieldMappings&gt;</code> to your config, then regenerate.</p>
</li>
<li><p>If using Synthesis.Blade, you will need to change the visibility on <code>GetItem()</code> for any presenters that use <code>SynthesisPresenter</code> as their base class to public, instead of protected.</p>
</li>
<li><p>Verify that the case of your content search config patch at the bottom of <code>Synthesis.config</code> matches the case in your <code>Sitecore.ContentSearch.Lucene.DefaultIndexConfiguration.config</code>. The case of the default config changed in Update-2, but depending on how you upgraded yours might not have. See <a href="https://kamsar.net/index.php/2013/09/sitecore-7-update-2-and-synthesis-6/">this blog post</a> for details as to why this is necesary. If the case is incorrect, Synthesis LINQ queries will not work correctly.</p>
</li>
<li><p>Fix any remaining build issues caused by breaking changes (if any), and test the site.</p>
</li>
</ul>
<h2 id="Feedback"><a href="#Feedback" class="headerlink" title="Feedback"></a>Feedback</h2><p>I’d love to hear from you if you have trouble or ideas. <a target="_blank" rel="noopener" href="https://github.com/kamsar/Synthesis/issues/new">Send me an issue on GitHub!</a></p>
<p>As always, the <a target="_blank" rel="noopener" href="https://github.com/kamsar/Synthesis">Synthesis source is available</a> under <a target="_blank" rel="noopener" href="http://opensource.org/licenses/MIT">the MIT license</a>, so feel free to hack away - and send me a pull request ;)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kamsar.net/index.php/2013/10/announcing-synthesis-7/" data-id="ckrl9emxo001i98q780v72kyp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/index.php/2013/10/sitecore-preview-mode-and-loading-jquery/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Sitecore preview mode and loading jQuery
        
      </div>
    </a>
  
  
    <a href="/index.php/2013/10/announcing-blade-2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Announcing Blade 2</div>
    </a>
  
</nav>

  
</article>

</section>
      
        <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul id="recent-post" class="no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/JavaScript/">JavaScript</a></p>
              <p class="item-title"><a href="/index.php/2021/07/Fun-with-async-generators-and-for-await/" class="title">Fun with async generators and for await</a></p>
              <p class="item-date"><time datetime="2021-07-26T23:30:51.000Z" itemprop="datePublished">July 26, 2021</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/Jamstack/">Jamstack</a></p>
              <p class="item-title"><a href="/index.php/2020/08/Deploying-multiple-Netlify-sites-from-one-Git-repository/" class="title">Deploying multiple Netlify sites from one monorepo</a></p>
              <p class="item-date"><time datetime="2020-08-21T03:30:32.000Z" itemprop="datePublished">August 20, 2020</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/JSS/">JSS</a></p>
              <p class="item-title"><a href="/index.php/2019/09/Running-JSS-headless-mode-in-containers-part-2-Build-containers/" class="title">Running JSS headless mode in containers part 2: Build containers</a></p>
              <p class="item-date"><time datetime="2019-09-16T02:14:04.000Z" itemprop="datePublished">September 15, 2019</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/JSS/">JSS</a></p>
              <p class="item-title"><a href="/index.php/2019/09/Running-JSS-headless-mode-in-containers-part-1/" class="title">Running JSS headless mode in containers, part 1</a></p>
              <p class="item-date"><time datetime="2019-09-08T19:00:36.000Z" itemprop="datePublished">September 8, 2019</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/C/">C#</a></p>
              <p class="item-title"><a href="/index.php/2019/05/Build-2019-All-the-things/" class="title">Build 2019: All the things</a></p>
              <p class="item-date"><time datetime="2019-05-10T23:01:11.000Z" itemprop="datePublished">May 10, 2019</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/index.php/category/April-1/">April 1</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Blade/">Blade</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Build-Scripts/">Build Scripts</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/C/">C#</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Dianoga/">Dianoga</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/JSS/">JSS</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Jamstack/">Jamstack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/JavaScript/">JavaScript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Node-js/">Node.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/">Sitecore</a><span class="category-list-count">39</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/Crypto/">Crypto</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/Lucene/">Lucene</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/MVC/">MVC</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/Search/">Search</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/xDB/">xDB</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Synthesis/">Synthesis</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Unicorn/">Unicorn</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/WebConsole/">WebConsole</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  
  <div id="toTop" class="fa fa-chevron-up"></div>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>&copy; 2021 Kam Figy</p>
      <p><small>Opinions expressed on this blog are my own, and not necessarily those of my employer.</small></p>
     <p><small>This work is licensed under a <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</small></p>
    </div>
  </div>
</footer>
    


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>




<script src="/js/script.js"></script>


  </div>
</body>
</html>