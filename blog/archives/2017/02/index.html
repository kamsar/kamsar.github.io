<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2017/2 | Kam&#39;s Idea Log</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Kam&#39;s Idea Log">
<meta property="og:url" content="https://kamsar.net/blog/archives/2017/02/index.html">
<meta property="og:site_name" content="Kam&#39;s Idea Log">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Kam Figy">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@kamsar">
  
    <link rel="alternative" href="/index.php/feed" title="Kam&#39;s Idea Log" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-62284328-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 5.4.0"></head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo">
        <span class="site-title">Kam&#39;s Idea Log</span>
        <span class="subtitle">C#, Jamstack, and Shenanigans</span>
      </a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        <div class="profile" id="profile-nav">
          <a id="profile-anchor" href="javascript:;"><img class="avatar" src="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=40" srcset="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=80 2x" alt="omg the beard"><i class="fa fa-caret-down"></i></a>
        </div>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="https://kamsar.net"></form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
      
        <td><a class="main-nav-link" href="/">Home</a></td>
      
        <td><a class="main-nav-link" href="/blog/archives">Archives</a></td>
      
      <td>
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="https://kamsar.net"></form>
      </td>
      </tr>
    </table>
  </div>
  
  <div id="header-sub" class="header-sub header-inner">
    <div class="outer">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/index.php/category/April-1/">April 1</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Blade/">Blade</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Build-Scripts/">Build Scripts</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/C/">C#</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Dianoga/">Dianoga</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/JSS/">JSS</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Jamstack/">Jamstack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/JavaScript/">JavaScript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Node-js/">Node.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/">Sitecore</a><span class="category-list-count">39</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Synthesis/">Synthesis</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Unicorn/">Unicorn</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/WebConsole/">WebConsole</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>
  
</header>
    <div class="outer">
      <aside id="profile">
  <div class="inner profile-inner">
  	<div class="base-info profile-block">
		  <img id="avatar" src="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=128" srcset="https://www.gravatar.com/avatar/314826f5d569260f26ac9f26f9e38b86?s=256 2x" alt="#sitecorebeard">
      <h2 id="name">Kam Figy</h2>
      <h3 id="title">Principal Platform Architect at</h3>
      <a class="corp-logo" href="https://uniform.dev" target="_blank"><img src="/css/images/uniform-logo.svg" alt="Uniform" width="180"></a>
      <span id="location"><i class="fa fa-map-marker"></i>Vancouver, WA USA</span>
      <a id="follow" target="_blank" rel="noopener" href="https://twitter.com/kamsar">FOLLOW</a>
  	</div>
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
        
          <td><a target="_blank" rel="noopener" href="https://github.com/kamsar" title="github"><i class="fa fa-github"></i></a></td>
        
          <td><a target="_blank" rel="noopener" href="https://twitter.com/kamsar" title="twitter"><i class="fa fa-twitter"></i></a></td>
        
          <td><a href="/index.php/feed" title="rss"><i class="fa fa-rss"></i></a></td>
        
        </tr>
      </table>
    </div>
    <div class="article-info profile-block bio">
      <h2>About</h2>
      <p>Kam has been making websites since 1996, starting out with a 14.4k modem on a <a href="https://en.wikipedia.org/wiki/Party_line_(telephony)" target="_blank">party line</a> in the Hawaiian rainforest. A veteran developer, architect, and speaker, he's been working in the content management space for well over a decade. Kam is the author of <a href="https://github.com/kamsar/Unicorn" target="_blank">Unicorn</a>, <a href="https://github.com/kamsar/Synthesis" target="_blank">Synthesis</a>, <a href="https://github.com/kamsar/Dianoga" target="_blank">Dianoga</a>, and several other open-source libraries.</p>
    </div>
  </div>
</aside>
      <section id="main">
  
  
    
    
      
        <div class="archive-year-wrap">
          <i class="fa fa-calendar"></i>
          <a href="/archives/2017" class="archive-year">2017</a>
        </div>
    
    <article id="post-Unicorn-4-Part-III-Configuration-Enhancements" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/index.php/2017/02/Unicorn-4-Part-III-Configuration-Enhancements/">Unicorn 4 Part III: Configuration Enhancements</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/index.php/2017/02/Unicorn-4-Part-III-Configuration-Enhancements/">
    <time datetime="2017-02-28T03:03:31.000Z" itemprop="datePublished">February 27, 2017</time>
  </a>
</div>
          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/index.php/category/Unicorn/">Unicorn</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>TL;DR: <a target="_blank" rel="noopener" href="https://www.nuget.org/packages/Unicorn.Core/4.0.0-pre03">Unicorn 4 prerelease</a> is on NuGet right now!</p>
<p>Now that that’s out of the way, let’s talk about another new Unicorn 4 feature: <a target="_blank" rel="noopener" href="http://helix.sitecore.net/">modular architecture</a> friendly configurations. </p>
<img src="/index.php/2017/02/Unicorn-4-Part-III-Configuration-Enhancements/everywhere.jpg" class="">

<p>When <a target="_blank" rel="noopener" href="https://github.com/Sitecore/Habitat">Habitat</a> first launched, I was mildly incredulous at the amount of duplication in its Unicorn configurations. Tons of tiny modules, all of which shared similar but not identical configurations (such as custom root folders) was not really a consideration when multiple configurations were originally conceived. Fast forward to today, and that’s a major use case that is more difficult than it needs to be.</p>
<p>Here’s an example of a Habitat Unicorn configuration:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">xmlns:patch</span>=<span class="string">&quot;http://www.sitecore.net/xmlconfig/&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sitecore</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">unicorn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">configurations</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span> </span></span><br><span class="line"><span class="tag">        	<span class="attr">name</span>=<span class="string">&quot;Feature.News&quot;</span> </span></span><br><span class="line"><span class="tag">        	<span class="attr">description</span>=<span class="string">&quot;Feature News&quot;</span> </span></span><br><span class="line"><span class="tag">        	<span class="attr">dependencies</span>=<span class="string">&quot;Foundation.Serialization,Foundation.Indexing&quot;</span> </span></span><br><span class="line"><span class="tag">        	<span class="attr">patch:after</span>=<span class="string">&quot;configuration[@name=&#x27;Foundation.Serialization&#x27;]&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">targetDataStore</span> <span class="attr">physicalRootPath</span>=<span class="string">&quot;$(sourceFolder)\feature\news\serialization&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">type</span>=<span class="string">&quot;Rainbow.Storage.SerializationFileSystemDataStore, Rainbow&quot;</span> <span class="attr">useDataCache</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">singleInstance</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">predicate</span> <span class="attr">type</span>=<span class="string">&quot;Unicorn.Predicates.SerializationPresetPredicate, Unicorn&quot;</span> <span class="attr">singleInstance</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;Feature.News.Templates&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/templates/Feature/News&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;Feature.News.Renderings&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/layout/renderings/Feature/News&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;Feature.News.Media&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/media library/Feature/News&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">predicate</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">roleDataStore</span> <span class="attr">type</span>=<span class="string">&quot;Unicorn.Roles.Data.FilesystemRoleDataStore, Unicorn.Roles&quot;</span> <span class="attr">physicalRootPath</span>=<span class="string">&quot;$(sourceFolder)\feature\news\serialization\Feature.News.Roles&quot;</span> <span class="attr">singleInstance</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">rolePredicate</span> <span class="attr">type</span>=<span class="string">&quot;Unicorn.Roles.RolePredicates.ConfigurationRolePredicate, Unicorn.Roles&quot;</span> <span class="attr">singleInstance</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span> <span class="attr">domain</span>=<span class="string">&quot;modules&quot;</span> <span class="attr">pattern</span>=<span class="string">&quot;^Feature News .*$&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">rolePredicate</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">configurations</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">unicorn</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">sitecore</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>It’s long and it has a ton of boilerplate that is either identical in every module, or else defined by system conventions (e.g. physicalRootPath). We don’t need to be that verbose when using Unicorn 4. When we setup a modular, convention-based system using Unicorn 4 we can start by using <em>abstract configurations</em> to define the conventions of our system:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">name</span>=<span class="string">&quot;Habitat.Feature.Base&quot;</span> <span class="attr">abstract</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">targetDataStore</span> <span class="attr">physicalRootPath</span>=<span class="string">&quot;$(sourceFolder)\$(layer)\$(module)\serialization&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">predicate</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;$(layer).$(module).Templates&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/templates/$(layer)/$(module)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;$(layer).$(module).Renderings&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/layout/renderings/$(layer).$(module)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;$(layer).$(module).Media&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/media library/$(layer).$(module)&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">predicate</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">roleDataStore</span> <span class="attr">type</span>=<span class="string">&quot;Unicorn.Roles.Data.FilesystemRoleDataStore, Unicorn.Roles&quot;</span> <span class="attr">physicalRootPath</span>=<span class="string">&quot;$(sourceFolder)\$(layer)\$(module)\serialization\$(layer).$(module).Roles&quot;</span> <span class="attr">singleInstance</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">rolePredicate</span> <span class="attr">type</span>=<span class="string">&quot;Unicorn.Roles.RolePredicates.ConfigurationRolePredicate, Unicorn.Roles&quot;</span> <span class="attr">singleInstance</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">domain</span>=<span class="string">&quot;modules&quot;</span> <span class="attr">pattern</span>=<span class="string">&quot;^$(layer) $(module) .*$&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">rolePredicate</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>This configuration defines a configuration that other configurations can <em>extend</em>. Because of its <code>abstract</code>-ness it is not a Unicorn configuration itself, only a template. Non-abstract configurations may also be extended.</p>
<p>This abstract configuration is also making use of Unicorn 4’s ability to do <em>variable replacement</em> in configurations. The <code>$(layer)</code> and <code>$(module)</code> variables are expanded in the extending configuration and are based on the convention of naming your configurations <code>Layer.Module</code>. You can also expand <a target="_blank" rel="noopener" href="https://github.com/kamsar/Unicorn/blob/master/src/Unicorn/Standard%20Config%20Files/Unicorn.CustomSerializationFolder.config.example#L42">more than one config per module</a> and <a target="_blank" rel="noopener" href="https://github.com/kamsar/Unicorn/blob/master/src/Unicorn/Standard%20Config%20Files/Unicorn.config#L190">use your own variables</a>. Using our abstract <code>Habitat.Feature.Base</code> configuration above, the same <code>Feature.News</code> configuration we started with can now be expressed much more simply:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span> </span></span><br><span class="line"><span class="tag">	<span class="attr">name</span>=<span class="string">&quot;Feature.News&quot;</span> </span></span><br><span class="line"><span class="tag">	<span class="attr">description</span>=<span class="string">&quot;Feature News&quot;</span> </span></span><br><span class="line"><span class="tag">	<span class="attr">dependencies</span>=<span class="string">&quot;Foundation.Serialization,Foundation.Indexing&quot;</span> </span></span><br><span class="line"><span class="tag">	<span class="attr">extends</span>=<span class="string">&quot;Habitat.Feature.Base&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Nice huh? But what if you want to extend or replace a dependency in the inherited configuration? You can do that, too - and using Unicorn 4’s element inheritance system you can also do it very cleanly. Unicorn configurations have always been architecturally a set of independent IoC containers. The <code>&lt;defaults&gt;</code> node in <code>Unicorn.config</code> sets up the defaults, and then each configuration’s nodes override and replace the defaults if they exist. This is how you can <a target="_blank" rel="noopener" href="https://github.com/kamsar/Unicorn/blob/master/src/Unicorn/Standard%20Config%20Files/Unicorn.Configs.NewItemsOnly.example">deploy only new items</a> with the <code>NewItemsOnlyEvaluator</code> - you’re replacing the default evaluator with a different dependency implementation.</p>
<p>Unicorn 4 takes this a step further: with config inheritance, dependencies can be partially extended at an element level. You might have noticed this already in the <code>Habitat.Feature.Base</code> configuration, when we did this:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">targetDataStore</span> <span class="attr">physicalRootPath</span>=<span class="string">&quot;$(sourceFolder)\$(layer)\$(module)\serialization&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>In Unicorn 3, this would have required a <code>type</code> attribute. In Unicorn 4, <em>unless</em> you specify a <code>type</code> attribute, any attributes you add either replace or add to the default (or inherited) implementation. So instead this kept the same default dependency definition and <em>changed</em> an attribute on it - the <code>physicalRootPath</code>. </p>
<p>If you <em>do</em> specify a <code>type</code>, nothing is inherited and it works like Unicorn 3. Thus existing configurations will also work without modification :)</p>
<p>But what about things that have more than just attributes, like the <code>predicate</code>‘s <code>include</code> nodes? You can <em>append</em> elements in the inherited configuration in that case. If we take our <code>Habitat.Feature.Base</code> configuration above and extend it like this:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">predicate</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;Foo&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/Foo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">predicate</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>The end result is effectively:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">predicate</span> <span class="attr">type</span>=<span class="string">&quot;Unicorn.Predicates.SerializationPresetPredicate, Unicorn&quot;</span> <span class="attr">singleInstance</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;Feature.News.Templates&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/templates/Feature/News&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;Feature.News.Renderings&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/layout/renderings/Feature/News&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;Feature.News.Media&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/media library/Feature/News&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;Foo&quot;</span> <span class="attr">database</span>=<span class="string">&quot;master&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/sitecore/Foo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">predicate</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>You cannot remove inherited predicate nodes (or other dependencies that use children like <code>fieldFilter</code>), so plan accordingly: adding elements only.</p>
<p>And there you have it: with Unicorn 4 you can reasonably simply create serialization conventions for your modules and avoid configuration duplication - or if you’re not ready to go modular, you can at least enjoy not needing to have a <code>type</code> on most configuration nodes.</p>
<h2 id="But-Wait-There’s-More-🐘-The-Console-No-Longer-Sucks"><a href="#But-Wait-There’s-More-🐘-The-Console-No-Longer-Sucks" class="headerlink" title="But Wait, There’s More 🐘: The Console No Longer Sucks"></a>But Wait, There’s More 🐘: The Console No Longer Sucks</h2><h3 id="In-the-Control-Panel…"><a href="#In-the-Control-Panel…" class="headerlink" title="In the Control Panel…"></a>In the Control Panel…</h3><p>The Unicorn console has also received a serious upgrade in Unicorn 4. If you’ve ever run a sync that changed a large number of items from the Unicorn Control Panel, you may have noticed the browser slow to a crawl and the sync seem to almost stop. The console that underpins Unicorn 3 and earlier started to choke at around 500 lines. </p>
<p>No longer! Unicorn 4’s console has spit out <strong>100,000</strong> lines without a hitch.</p>
<h3 id="Automated-Tools-PowerShell-API"><a href="#Automated-Tools-PowerShell-API" class="headerlink" title="Automated Tools (PowerShell API)"></a>Automated Tools (PowerShell API)</h3><p>The automated tool console has also received an upgrade. Previously the tool console buffered all the output of a sync before sending it back. This caused problems in certain environments, namely Azure, where TCP connections that don’t send any data for more than 4 minutes are terminated. This would cause any long-running syncs in Azure to die unexpectedly.</p>
<p>In Unicorn 4 the automated tool console emits data in a stream just like the control panel console. There’s also a heartbeat timer where if no new console entries are made for 30 seconds, a <code>.</code> will be sent to make sure the connection is kept active. </p>
<p>The streaming console also requires updating your <code>Unicorn.psm1</code> file - not only will you get defense against TCP timeouts, you’ll also be able to see the sync occur in real-time using the PSAPI just like you would from the control panel. No more waiting until it’s done to see how things are going :)</p>
<h2 id="Can-I-have-it-yet"><a href="#Can-I-have-it-yet" class="headerlink" title="Can I have it yet?"></a>Can I have it yet?</h2><p>Absolutely. You can find <a target="_blank" rel="noopener" href="https://www.nuget.org/packages/Unicorn/4.0.0-pre03">Unicorn 4.0.0-pre03</a> on NuGet right now!</p>
<h3 id="How-stable-is-this"><a href="#How-stable-is-this" class="headerlink" title="How stable is this?"></a>How stable is this?</h3><p>More stable than you might think. Unicorn 4 is largely additions, fixes, and enhancements to the already stable codebase behind Unicorn 3. The core pieces have not changed very much, unless you enable Dilithium and that’s optional. The new config inheritance stuff has 97% code coverage. That’s not to say it’s bug free either. If you find bugs <a target="_blank" rel="noopener" href="https://github.com/kamsar/Unicorn/issues">let me know</a> and I’ll fix them :)</p>
<h3 id="What-about-installing-it"><a href="#What-about-installing-it" class="headerlink" title="What about installing it?"></a>What about installing it?</h3><p>Installation is just like Unicorn 3: Install the <code>Unicorn</code> NuGet package, and follow the directions in the README that will launch on installation to set up configuration(s).</p>
<p>NOTE: <a href="https://kamsar.net/index.php/2017/02/Unicorn-4-Preview-Project-Dilithium/">Dilithium</a> ships disabled by default. If you want to enable it, make a <em>copy</em> of <code>Unicorn.Dilithium.config.example</code> and enable it.</p>
<h3 id="What-about-upgrading-to-it"><a href="#What-about-upgrading-to-it" class="headerlink" title="What about upgrading to it?"></a>What about upgrading to it?</h3><p>If you’re coming from classical Unicorn 3.1 or later, upgrading is actually really simple: just upgrade your NuGet package. Unicorn 4 changes nothing about storage or formatting (<em>except</em> that the <code>__Originator</code> field is no longer ignored by default), so all existing serialized items are compatible.</p>
<p>Taking advantage of the config enhancements detailed above is also entirely optional: Unicorn 3 configurations are totally readable by Unicorn 4.</p>
<p>If you’re invoking Unicorn via its PowerShell API, make sure to upgrade your <code>Unicorn.psm1</code> to the Unicorn 4 version to ensure correct error handling with the streaming console.</p>
<p>Have fun!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kamsar.net/index.php/2017/02/Unicorn-4-Part-III-Configuration-Enhancements/" data-id="ckrl9emyk004x98q7g23x8mj0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    
    
    <article id="post-Unicorn-4-Preview-Part-2-5-Generating-Packages-with-SPE" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/index.php/2017/02/Unicorn-4-Preview-Part-2-5-Generating-Packages-with-SPE/">Unicorn 4 Preview Part 2.5: Generating Unicorn Packages with SPE</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/index.php/2017/02/Unicorn-4-Preview-Part-2-5-Generating-Packages-with-SPE/">
    <time datetime="2017-02-12T05:09:02.000Z" itemprop="datePublished">February 11, 2017</time>
  </a>
</div>
          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/index.php/category/Unicorn/">Unicorn</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="/index.php/2017/02/Unicorn-4-Preview-Part-2-SPE-Support/">Last time</a> we talked about how Sitecore PowerShell Extensions support was coming to Unicorn 4. This time, we’ve got a new cmdlet to share.</p>
<p>Over time, many people have asked if there was a way to generate Sitecore packages from Unicorn. The answer has always been no, for many good reasons: packages install slowly, cannot ignore specific fields, or process advanced exclusions like a Unicorn predicate can. This makes them much less safe (and much slower) for deployment purposes compared to a remotely invoked Sync using deployed serialized items.</p>
<p>But there is a great use case for generating packages from Unicorn: authoring modules. As a module author, a method is needed to track the items that belong to your module and also to reliably create Sitecore packages for distribution of your module which contain those items. Unicorn is a natural fit for simply tracking module items, but it has lacked the ability to automatically push updates to release packages like it can to serialized items. This unnecessarily complicates things and reduces release reliability. That’s bad.</p>
<p>So when <a target="_blank" rel="noopener" href="https://twitter.com/MichaelWest101">Michael West</a> and <a target="_blank" rel="noopener" href="https://twitter.com/adamnaj">Adam Najmanowicz</a>, the authors of Sitecore PowerShell Extensions, asked if there was a way we could export Unicorn configurations to packages my answer was <em>absolutely.</em></p>
<p>SPE has long had <a target="_blank" rel="noopener" href="https://doc.sitecorepowershell.com/appendix/commands/Export-Package.html#examples">packaging support</a> built into it, and in fact SPE’s release packages are built using SPE. Unicorn packaging support is also implemented through SPE, and here’s how it works:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create a new Sitecore Package (SPE cmdlet)</span></span><br><span class="line"><span class="variable">$pkg</span> = <span class="built_in">New-Package</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the Unicorn Configuration(s) we want to package</span></span><br><span class="line"><span class="variable">$configs</span> = <span class="built_in">Get-UnicornConfiguration</span> <span class="string">&quot;Foundation.*&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># Pipe the configs into New-UnicornItemSource </span></span><br><span class="line"><span class="comment"># to process them and add them to the package project</span></span><br><span class="line"><span class="comment"># (without -Project, this would emit the source object(s) </span></span><br><span class="line"><span class="comment">#   which can be manually added with $pkg.Sources.Add())</span></span><br><span class="line"><span class="variable">$configs</span> | <span class="built_in">New-UnicornItemSource</span> <span class="literal">-Project</span> <span class="variable">$pkg</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Export the package to a zip file on disk</span></span><br><span class="line"><span class="built_in">Export-Package</span> <span class="literal">-Project</span> <span class="variable">$pkg</span> <span class="literal">-Path</span> <span class="string">&quot;C:\foo.zip&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>And when you’re done with that, <code>c:\foo.zip</code> would contain a package that when installed will contain the entire contents of any Unicorn configuration matching <code>Foundation.*</code>.</p>
<p><code>New-UnicornItemSource</code> also accepts parameters to specify package installation options, exactly like SPE’s <a target="_blank" rel="noopener" href="https://doc.sitecorepowershell.com/appendix/commands/New-ExplicitItemSource.html">New-ExplicitItemSource</a>. This cmdlet is also very similar to how <code>New-UnicornItemSource</code> works: each item that is included in the configuration is added to the package as an explicit item source. Doing this also means that the exported package completely respects the Unicorn Predicate, including exclusions of child paths (note that if you specify <code>-InstallMode Overwrite</code>, excluded children may be deleted by the package).</p>
<h2 id="Questions"><a href="#Questions" class="headerlink" title="Questions?"></a>Questions?</h2><h3 id="Are-the-packaged-items-pulled-directly-from-the-serialized-items"><a href="#Are-the-packaged-items-pulled-directly-from-the-serialized-items" class="headerlink" title="Are the packaged items pulled directly from the serialized items?"></a>Are the packaged items pulled directly from the serialized items?</h3><p>No, they are pulled from the Sitecore database because the Sitecore packaging APIs work in <code>Item</code>s. So make sure to <em>sync</em> before you generate a package. Unless you’re using Transparent Sync in which case the items will already be up to date.</p>
<h3 id="Should-I-use-this-to-deploy-my-site"><a href="#Should-I-use-this-to-deploy-my-site" class="headerlink" title="Should I use this to deploy my site?"></a>Should I use this to deploy my site?</h3><p>No. As mentioned above, packages are a slower and more dangerous method to deploy item updates to your site.</p>
<h3 id="Does-this-mean-modules-will-start-requiring-Unicorn-🐘"><a href="#Does-this-mean-modules-will-start-requiring-Unicorn-🐘" class="headerlink" title="Does this mean modules will start requiring Unicorn? 🐘"></a>Does this mean modules will start requiring Unicorn? 🐘</h3><p>No. Unicorn would only be used in the development of the module, and the build process used to generate plain old Sitecore Packages for module releases. The module itself would need depend on neither Unicorn, Rainbow, or SPE.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kamsar.net/index.php/2017/02/Unicorn-4-Preview-Part-2-5-Generating-Packages-with-SPE/" data-id="ckrl9emyj004v98q748kzd9ko" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    
    
    <article id="post-Where-s-the-comments" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/index.php/2017/02/Where-s-the-comments/">Where&#39;s the comments?</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/index.php/2017/02/Where-s-the-comments/">
    <time datetime="2017-02-07T03:20:50.000Z" itemprop="datePublished">February 6, 2017</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Because of low utilization and the fact that Disqus is about to start <a target="_blank" rel="noopener" href="http://www.daedtech.com/im-quitting-disqus/">spamming you with wonderful ads</a>, I’ve decided to turn comments off on my blog. </p>
<p>That’s not to say you’re not allowed to comment, because you can <a target="_blank" rel="noopener" href="https://twitter.com/kamsar">tweet</a> your comments or join <a target="_blank" rel="noopener" href="https://www.akshaysura.com/2015/10/27/how-to-join-sitecore-slack-community-chat/">Sitecore Community Slack</a> and comment all day.</p>
<p>In other news the blog is now fully SSL enabled, courtesy of <a target="_blank" rel="noopener" href="https://www.cloudflare.com/">CloudFlare</a>.</p>
<p>Happy hacking!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kamsar.net/index.php/2017/02/Where-s-the-comments/" data-id="ckrl9emyj004t98q7etbd1o2s" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    
    
    <article id="post-Unicorn-4-Preview-Part-2-SPE-Support" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/index.php/2017/02/Unicorn-4-Preview-Part-2-SPE-Support/">Unicorn 4 Preview, Part 2: SPE Support</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/index.php/2017/02/Unicorn-4-Preview-Part-2-SPE-Support/">
    <time datetime="2017-02-06T23:16:03.000Z" itemprop="datePublished">February 6, 2017</time>
  </a>
</div>
          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/index.php/category/Unicorn/">Unicorn</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Unicorn 4 will feature full support for <a target="_blank" rel="noopener" href="https://www.gitbook.com/book/sitecorepowershell/sitecore-powershell-extensions/details">Sitecore PowerShell Extensions</a> (SPE) to perform Unicorn actions. If you’ve ever wanted deep programmatic control over Unicorn (for example “I want to sync Foundation.*”), or if you’ve got an existing deployment process that’s already using SPE Remoting to perform deployment tasks - this is for you.</p>
<img src="/index.php/2017/02/Unicorn-4-Preview-Part-2-SPE-Support/spe.png" class="">

<p>To use Unicorn cmdlets in SPE, all that is necessary is to install the SPE package along with Unicorn. Unicorn 4 comes with configuration that remains quiescent until SPE is installed that will automatically enable the Unicorn cmdlets. In case that’s not clear enough: SPE is an optional addition and will not be required to use Unicorn 4.</p>
<p>So what can we do with Unicorn cmdlets for SPE?</p>
<h2 id="Configurations"><a href="#Configurations" class="headerlink" title="Configurations"></a>Configurations</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Get one</span></span><br><span class="line"><span class="built_in">Get-UnicornConfiguration</span> <span class="string">&quot;Foundation.Foo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get by filter</span></span><br><span class="line"><span class="built_in">Get-UnicornConfiguration</span> <span class="string">&quot;Foundation.*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get all</span></span><br><span class="line"><span class="built_in">Get-UnicornConfiguration</span></span><br></pre></td></tr></table></figure>

<p>The result of <code>Get-UnicornConfiguration</code> is an array of <code>IConfiguration</code> objects, which you can spelunk (e.g. with their <code>Name</code> property) or pass to other cmdlets. Configurations are read only.</p>
<h2 id="Syncing"><a href="#Syncing" class="headerlink" title="Syncing"></a>Syncing</h2><p>Sync cmdlets make use of <a target="_blank" rel="noopener" href="https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.utility/write-progress">Write-Progress</a> to provide a similar progress bar experience to the Control Panel, albeit a bit less responsive.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sync one</span></span><br><span class="line"><span class="built_in">Sync-UnicornConfiguration</span> <span class="string">&quot;Foundation.Foo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Sync multiple by name</span></span><br><span class="line"><span class="built_in">Sync-UnicornConfiguration</span> <span class="selector-tag">@</span>(<span class="string">&quot;Foundation.Foo&quot;</span>, <span class="string">&quot;Foundation.Bar&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sync multiple from pipeline</span></span><br><span class="line"><span class="built_in">Get-UnicornConfiguration</span> <span class="string">&quot;Foundation.*&quot;</span> | <span class="built_in">Sync-UnicornConfiguration</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Sync all, except transparent sync-enabled configurations</span></span><br><span class="line"><span class="built_in">Get-UnicornConfiguration</span> | <span class="built_in">Sync-UnicornConfiguration</span> <span class="literal">-SkipTransparent</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Optionally set log output level (Debug, Info, Warn, Error)</span></span><br><span class="line"><span class="built_in">Sync-UnicornConfiguration</span> <span class="literal">-LogLevel</span> Warn</span><br></pre></td></tr></table></figure>

<p>For example:</p>
<img src="/index.php/2017/02/Unicorn-4-Preview-Part-2-SPE-Support/sync.png" class="">

<h2 id="Partial-Syncing"><a href="#Partial-Syncing" class="headerlink" title="Partial Syncing"></a>Partial Syncing</h2><p>Sometimes you want to only sync a portion of a configuration. You can do that with PowerShell using <code>Sync-UnicornItem</code>.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sync a single item (note: must be under Unicorn control)</span></span><br><span class="line"><span class="built_in">Get-Item</span> <span class="string">&quot;/sitecore/content&quot;</span> | <span class="built_in">Sync-UnicornItem</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Sync multiple single items (note: all must be under Unicorn control)</span></span><br><span class="line"><span class="built_in">Get-ChildItem</span> <span class="string">&quot;/sitecore/content&quot;</span> | <span class="built_in">Sync-UnicornItem</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># Sync an entire item tree, show only warnings and errors</span></span><br><span class="line"><span class="built_in">Get-Item</span> <span class="string">&quot;/sitecore/content&quot;</span> | <span class="built_in">Sync-UnicornItem</span> <span class="literal">-Recurse</span> <span class="literal">-LogLevel</span> Warn</span><br></pre></td></tr></table></figure>

<h2 id="Reserializing"><a href="#Reserializing" class="headerlink" title="Reserializing"></a>Reserializing</h2><p>The cmdlet to reserialize is called <code>Export-UnicornConfiguration</code> because <code>Reserialize</code> is not an <a target="_blank" rel="noopener" href="https://msdn.microsoft.com/en-us/powershell/reference/5.0/microsoft.powershell.core/functions/get-verb">approved verb</a> for a cmdlet :)</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Reserialize one</span></span><br><span class="line"><span class="built_in">Export-UnicornConfiguration</span> <span class="string">&quot;Foundation.Foo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Reserialize multiple by name</span></span><br><span class="line"><span class="built_in">Export-UnicornConfiguration</span> <span class="selector-tag">@</span>(<span class="string">&quot;Foundation.Foo&quot;</span>, <span class="string">&quot;Foundation.Bar&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reserialize from pipeline</span></span><br><span class="line"><span class="built_in">Get-UnicornConfiguration</span> <span class="string">&quot;Foundation.*&quot;</span> | <span class="built_in">Export-UnicornConfiguration</span></span><br></pre></td></tr></table></figure>

<h2 id="Partial-Reserializing"><a href="#Partial-Reserializing" class="headerlink" title="Partial Reserializing"></a>Partial Reserializing</h2><p>Sometimes you want to only reserialize a portion of a configuration. You can do that with PowerShell using <code>Export-UnicornItem</code>.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Reserialize a single item (note: must be under Unicorn control)</span></span><br><span class="line"><span class="built_in">Get-Item</span> <span class="string">&quot;/sitecore/content&quot;</span> | <span class="built_in">Export-UnicornItem</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Reserialize multiple single items (note: all must be under Unicorn control)</span></span><br><span class="line"><span class="built_in">Get-ChildItem</span> <span class="string">&quot;/sitecore/content&quot;</span> | <span class="built_in">Export-UnicornItem</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># Reserialize an entire item tree</span></span><br><span class="line"><span class="built_in">Get-Item</span> <span class="string">&quot;/sitecore/content&quot;</span> | <span class="built_in">Export-UnicornItem</span> <span class="literal">-Recurse</span></span><br></pre></td></tr></table></figure>

<h2 id="Converting-to-Raw-YAML"><a href="#Converting-to-Raw-YAML" class="headerlink" title="Converting to Raw YAML"></a>Converting to Raw YAML</h2><p>You can also dump out the raw YAML for an item - or items. The output of <code>ConvertTo-RainbowYaml</code> is either a string or array of strings depending on how many items were passed to it. Note that unless <code>-Raw</code> is specified, the default field formatters and excluded fields Unicorn ships with are used. These are non-customizable and do not follow Unicorn defaults if changed.</p>
<img src="/index.php/2017/02/Unicorn-4-Preview-Part-2-SPE-Support/enyaml.png" class="">

<p>This capability enables casual use of YAML serialization without having to use Unicorn or set up a configuration. It’s not a good solution for general purpose synchronization though simply because the nuances of storing trees of items in files are many. Very many. But I’m curious what uses people will find for this :)</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Convert an item to YAML format (always uses default excludes and field formatters)</span></span><br><span class="line"><span class="built_in">Get-Item</span> <span class="string">&quot;/sitecore/content&quot;</span> | <span class="built_in">ConvertTo-RainbowYaml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Convert many items to YAML strings</span></span><br><span class="line"><span class="built_in">Get-ChildItem</span> <span class="string">&quot;/sitecore/content&quot;</span> | <span class="built_in">ConvertTo-RainbowYaml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable all field formats and field filtering</span></span><br><span class="line"><span class="comment"># (e.g. disable XML pretty printing,</span></span><br><span class="line"><span class="comment"># and don&#x27;t ignore the Revision and Modified fields, etc)</span></span><br><span class="line"><span class="built_in">Get-Item</span> <span class="string">&quot;/sitecore/content&quot;</span> | <span class="built_in">ConvertTo-RainbowYaml</span> <span class="literal">-Raw</span></span><br></pre></td></tr></table></figure>

<h2 id="Converting-from-Raw-YAML"><a href="#Converting-from-Raw-YAML" class="headerlink" title="Converting from Raw YAML"></a>Converting from Raw YAML</h2><img src="/index.php/2017/02/Unicorn-4-Preview-Part-2-SPE-Support/convertfrom.png" class="">

<p>In Rainbow the <code>IItemData</code> interface is the internal unit of an Item. The <code>ConvertFrom-RainbowYaml</code> cmdlet converts raw YAML string(s) into <code>IItemData</code> which you can then spelunk as objects or deserialize as needed.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Get IItemDatas from YAML variable</span></span><br><span class="line"><span class="variable">$rawYaml</span> | <span class="built_in">ConvertFrom-RainbowYaml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get IItemData and disable all field filters</span></span><br><span class="line"><span class="comment"># (use this if you ran ConvertTo-RainbowYaml with -Raw)</span></span><br><span class="line"><span class="variable">$yaml</span> | <span class="built_in">ConvertFrom-RainbowYaml</span> <span class="literal">-Raw</span></span><br></pre></td></tr></table></figure>

<h2 id="Deserialization"><a href="#Deserialization" class="headerlink" title="Deserialization"></a>Deserialization</h2><p>To deserialize items, use <code>Import-RainbowItem</code> which takes <code>IItemData</code> items in and deserializes them into the Sitecore database. No comparison is done before deserialization, which makes this a bit slower than a full Unicorn sync.</p>
<img src="/index.php/2017/02/Unicorn-4-Preview-Part-2-SPE-Support/elephant.png" class="">

<p>As a shorthand <code>Import-RainbowItem</code> also accepts YAML strings, however as <code>IItemData</code> can represent any sort of item, it is not limited only to deserializing YAML-sourced items.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deserialize IItemDatas from ConvertFrom-RainbowYaml</span></span><br><span class="line"><span class="variable">$rawYaml</span> | <span class="built_in">ConvertFrom-RainbowYaml</span> | <span class="built_in">Import-RainbowItem</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deserialize raw YAML from pipeline into Sitecore </span></span><br><span class="line"><span class="comment"># Shortcut bypassing ConvertFrom-RainbowYaml</span></span><br><span class="line"><span class="variable">$yaml</span> | <span class="built_in">Import-RainbowItem</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deserialize and disable all field filters</span></span><br><span class="line"><span class="comment"># (use this if you ran ConvertTo-RainbowYaml with -Raw)</span></span><br><span class="line"><span class="variable">$yaml</span> | <span class="built_in">Import-RainbowItem</span> <span class="literal">-Raw</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deserialize multiple at once</span></span><br><span class="line"><span class="variable">$yamlStringArray</span> | <span class="built_in">Import-RainbowItem</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Complete example that does nothing but eat CPU</span></span><br><span class="line"><span class="built_in">Get-ChildItem</span> <span class="string">&quot;/sitecore/content&quot;</span> | <span class="built_in">ConvertTo-RainbowYaml</span> | <span class="built_in">Import-RainbowItem</span></span><br></pre></td></tr></table></figure>

<h2 id="Questions"><a href="#Questions" class="headerlink" title="Questions?"></a>Questions?</h2><h3 id="Does-this-mean-the-existing-PowerShell-Remote-API-is-obsolete"><a href="#Does-this-mean-the-existing-PowerShell-Remote-API-is-obsolete" class="headerlink" title="Does this mean the existing PowerShell Remote API is obsolete?"></a>Does this mean the existing <a target="_blank" rel="noopener" href="https://github.com/kamsar/Unicorn/tree/master/doc/PowerShell%20Remote%20Scripting">PowerShell Remote API</a> is obsolete?</h3><p>No. The existing PowerShell API uses Windows PowerShell to provide remote syncing capability and does not require installing <em>Sitecore</em> PowerShell. They serve different parallel purposes, and both are here to stay.</p>
<h3 id="You-have-no-gifs-or-memes-in-this-post-Is-something-wrong"><a href="#You-have-no-gifs-or-memes-in-this-post-Is-something-wrong" class="headerlink" title="You have no gifs or memes in this post. Is something wrong?"></a>You have no gifs or memes in this post. Is something wrong?</h3><p><img src="https://i.giphy.com/qZZAQDUNeXams.gif" alt="you mad?"></p>
<h3 id="Can-I-have-a-beta-yet"><a href="#Can-I-have-a-beta-yet" class="headerlink" title="Can I have a beta yet?"></a>Can I have a beta yet?</h3><p>I’ll be releasing a beta once I finish the features I have planned. Yep, there’s at least one more ;)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kamsar.net/index.php/2017/02/Unicorn-4-Preview-Part-2-SPE-Support/" data-id="ckrl9emyi004r98q7beja0xdw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    
    
    <article id="post-Unicorn-4-Preview-Project-Dilithium" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/index.php/2017/02/Unicorn-4-Preview-Project-Dilithium/">Unicorn 4 Preview, Part 1: Project Dilithium</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/index.php/2017/02/Unicorn-4-Preview-Project-Dilithium/">
    <time datetime="2017-02-02T04:51:13.000Z" itemprop="datePublished">February 1, 2017</time>
  </a>
</div>
          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/index.php/category/Unicorn/">Unicorn</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Not too long ago I was considering the future of Unicorn. Rather naïvely, I couldn’t think of all that much that needed fixing. I wondered if there would ever be a Unicorn 4. </p>
<p>Now since you’ve read the title of this blog post, something tells me you don’t think that attitude lasted very long. It didn’t. Because there’s a pretty simple truth about Unicorn, even with all the <a href="https://kamsar.net/index.php/2015/09/Unicorn-3-What-s-new/#Performance-50-more-of-it">optimizations I put in to Unicorn 3</a>:</p>
<img src="/index.php/2017/02/Unicorn-4-Preview-Project-Dilithium/tdh.jpg" class="">

<p>There were two primary causes of this:</p>
<ol>
<li>The Sitecore API is slow and not suited to dealing with large quantities of items</li>
<li>Unicorn was originally designed to optimize for a few configurations, and Helix was blasting the number of active configurations to large numbers</li>
</ol>
<p>I found that the sync time was becoming annoyingly long. Long enough that it was a distraction, long enough that a piddly 20% faster from more profiling just wasn’t good enough.</p>
<p>What to do, what to do.</p>
<h2 id="Introducing-Project-Dilithium"><a href="#Introducing-Project-Dilithium" class="headerlink" title="Introducing Project Dilithium"></a>Introducing Project Dilithium</h2><p>I started on a crazy quest to speed up syncing performance. Sitecore’s recently added <a target="_blank" rel="noopener" href="https://stephenpope.github.io/publishing">Publishing Service</a> gained drastic speed gains in publishing by leveraging direct database access. Publishing, like syncing, is a batch-oriented operation. The Sitecore API is a single-item-oriented API. It does no optimizations, aside from caching, when you want more than one item. I resolved to try out SQL and see how it went. It went. See for yourself:</p>
<img src="/index.php/2017/02/Unicorn-4-Preview-Project-Dilithium/perf.png" class="">

<p>(benchmarks on i5-3570k@4GHz, SSDs, freshly restarted IIS + SQL, average of 3 runs each)</p>
<img src="/index.php/2017/02/Unicorn-4-Preview-Project-Dilithium/whoa.jpg" class="">

<h3 id="So-what-is-Dilithium"><a href="#So-what-is-Dilithium" class="headerlink" title="So what is Dilithium?"></a>So what is <a target="_blank" rel="noopener" href="http://bit.ly/2kjLK50">Dilithium</a>?</h3><p>There are two pieces of the Dilithium project: SQL and Serialized. Both operate in a similar fashion: before a sync operation begins, all items that will be involved in that sync are read in a single big batch either from SQL or disk. The actual sync then occurs against the pre-batched items. In case you’re wondering, the graph above <em>includes</em> the batching times for Dilithium - no cheating :)</p>
<p>The SQL version takes advantage of the <code>Descendants</code> table to grab all predicate-included items for every configuration in a single huge SQL query (this does mean that <code>FastQueryDescendantsDisabled</code> must be turned off). These items are then indexed and prepared for fast access. In this way, the entire data contents of the stock <code>core</code> database can be read in about 1500ms, compared to the Sitecore API’s 8 seconds.</p>
<p>The serialized version skips all the checks that usually are needed to traverse a Serialization File System tree - expensive operations that guarantee that the children you’re getting all belong to the same item ID, for example. It’s essentially reading all files sequentially and caching them for sync just like the SQL version.</p>
<p>When both DiSerialized and DiSQL are used together, they enable <em>parallel loading</em> of both sources at once. This reduces the load time quite significantly, as you can see on the shortest bar on the chart above.</p>
<h3 id="Questions"><a href="#Questions" class="headerlink" title="Questions?"></a>Questions?</h3><h4 id="Direct-SQL-are-you-nuts"><a href="#Direct-SQL-are-you-nuts" class="headerlink" title="Direct SQL, are you nuts?"></a>Direct SQL, are you nuts?</h4><p>Yes. Yes I am. Directly querying the Sitecore database is a terrible idea in almost every situation…except this. The schema for content has also been very stable for several major revisions of the product. And Stephen Pope said it was ok :)</p>
<h4 id="Is-it-any-faster-adding-or-modifying-items"><a href="#Is-it-any-faster-adding-or-modifying-items" class="headerlink" title="Is it any faster adding or modifying items?"></a>Is it any faster adding or modifying items?</h4><p>No. I’m not crazy enough to also do direct SQL writes, so all modifications go through normal Sitecore item saving APIs and perform pretty much the same as Unicorn 3. This also means that they’re mature, well-tested code - Unicorn 4 under the hood is not much different from v3, except for Dilithium.</p>
<h4 id="Can-I-turn-it-off"><a href="#Can-I-turn-it-off" class="headerlink" title="Can I turn it off?"></a>Can I turn it off?</h4><p>Heck yes. You can enable or disable Dilithium on a per-configuration basis. It also works just fine if you sync Dilithium and standard configurations together.</p>
<p>Serialized items and formats are identical between Dilithium and normal, so you can also enable and disable at will with no migration process.</p>
<h4 id="Will-this-eat-up-all-my-RAM"><a href="#Will-this-eat-up-all-my-RAM" class="headerlink" title="Will this eat up all my RAM?"></a>Will this eat up all my RAM?</h4><p>If you’re syncing gigabytes of media items…yes, definitely. For more normal developer and light content items, nope. DiSQL does not read blob data, so if you become RAM constrained turn off DiSerialized first.</p>
<p>Note that the precaches are disposed of immediately after the sync completes, so memory spikes are temporary.</p>
<h4 id="Let’s-address-the-🐘-in-the-room-how-is-Unicorn-4-60-faster-than-3-without-Dilithium"><a href="#Let’s-address-the-🐘-in-the-room-how-is-Unicorn-4-60-faster-than-3-without-Dilithium" class="headerlink" title="Let’s address the 🐘 in the room, how is Unicorn 4 60% faster than 3 without Dilithium?"></a>Let’s address the 🐘 in the room, how is Unicorn 4 60% faster than 3 without Dilithium?</h4><p>Actually pretty simple: eliminating a cache bombing that was done between syncing configurations that was needed for Transparent Sync. Well, it wasn’t needed if you’re syncing a non-Transparent configuration. Doing that meant that sites like Habitat with a ton of small non-Transparent configurations perform a <em>lot</em> faster.</p>
<h4 id="Any-other-performance-tricks"><a href="#Any-other-performance-tricks" class="headerlink" title="Any other performance tricks?"></a>Any other performance tricks?</h4><p>In my daily development I use a mix of Transparent Sync for developer items (templates, renderings), and standard sync for content items. Since Transparent Sync is disk-based anyway there is little point to running a sync on Transparent Sync configurations when you’re just doing local development. As such, there’s now an option to <em>skip</em> Transparent Sync-enabled configurations when you sync all. This is an option in the PowerShell API in Unicorn 4, as well as an option in the control panel (same place as log level).</p>
<p>Depending on how many Transparent Sync configurations you have, your time savings can be significant from enabling this. You should not however do this when deploying transparent configurations to a shared server.</p>
<h2 id="Can-I-have-it"><a href="#Can-I-have-it" class="headerlink" title="Can I have it?"></a>Can I have it?</h2><p>Not yet, it still needs some additional testing and vetting before I call it alpha. If you’re interested in being a brave early tester, get ahold of me on Sitecore Slack :)</p>
<h2 id="Is-this-the-only-new-thing-in-Unicorn-4"><a href="#Is-this-the-only-new-thing-in-Unicorn-4" class="headerlink" title="Is this the only new thing in Unicorn 4?"></a>Is this the only new thing in Unicorn 4?</h2><p>Nope. I’ve got some more tricks up my sleeve, so stay tuned for some more preview blogs coming soon&trade;</p>
<p><img src="https://i.giphy.com/26uf80oUzpxWmuTOo.gif"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kamsar.net/index.php/2017/02/Unicorn-4-Preview-Project-Dilithium/" data-id="ckrl9emyi004p98q7bq7805x0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
      
        <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul id="recent-post" class="no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/JavaScript/">JavaScript</a></p>
              <p class="item-title"><a href="/index.php/2021/07/Fun-with-async-generators-and-for-await/" class="title">Fun with async generators and for await</a></p>
              <p class="item-date"><time datetime="2021-07-26T23:30:51.000Z" itemprop="datePublished">July 26, 2021</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/Jamstack/">Jamstack</a></p>
              <p class="item-title"><a href="/index.php/2020/08/Deploying-multiple-Netlify-sites-from-one-Git-repository/" class="title">Deploying multiple Netlify sites from one monorepo</a></p>
              <p class="item-date"><time datetime="2020-08-21T03:30:32.000Z" itemprop="datePublished">August 20, 2020</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/JSS/">JSS</a></p>
              <p class="item-title"><a href="/index.php/2019/09/Running-JSS-headless-mode-in-containers-part-2-Build-containers/" class="title">Running JSS headless mode in containers part 2: Build containers</a></p>
              <p class="item-date"><time datetime="2019-09-16T02:14:04.000Z" itemprop="datePublished">September 15, 2019</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/JSS/">JSS</a></p>
              <p class="item-title"><a href="/index.php/2019/09/Running-JSS-headless-mode-in-containers-part-1/" class="title">Running JSS headless mode in containers, part 1</a></p>
              <p class="item-date"><time datetime="2019-09-08T19:00:36.000Z" itemprop="datePublished">September 8, 2019</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/index.php/category/C/">C#</a></p>
              <p class="item-title"><a href="/index.php/2019/05/Build-2019-All-the-things/" class="title">Build 2019: All the things</a></p>
              <p class="item-date"><time datetime="2019-05-10T23:01:11.000Z" itemprop="datePublished">May 10, 2019</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/index.php/category/April-1/">April 1</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Blade/">Blade</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Build-Scripts/">Build Scripts</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/C/">C#</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Dianoga/">Dianoga</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/JSS/">JSS</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Jamstack/">Jamstack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/JavaScript/">JavaScript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Node-js/">Node.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/">Sitecore</a><span class="category-list-count">39</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/Crypto/">Crypto</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/Lucene/">Lucene</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/MVC/">MVC</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/Search/">Search</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Sitecore/xDB/">xDB</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Synthesis/">Synthesis</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/Unicorn/">Unicorn</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/index.php/category/WebConsole/">WebConsole</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  
  <div id="toTop" class="fa fa-chevron-up"></div>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>&copy; 2021 Kam Figy</p>
      <p><small>Opinions expressed on this blog are my own, and not necessarily those of my employer.</small></p>
     <p><small>This work is licensed under a <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</small></p>
    </div>
  </div>
</footer>
    


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>




<script src="/js/script.js"></script>


  </div>
</body>
</html>